{% extends 'app/base.html' %}
{% load static %}
{% block title %}Profile{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'app/profile.css' %}">
{% endblock %}

{% block content %}
<div class="profile-container">
<div style="display: flex; gap: 15px; justify-content: flex-start; margin-left: 100px;">
    {% if profile.avatar %}
        <img src="{{ profile.avatar.url }}" alt="Avatar"
             style="width: 120px; height: 120px; object-fit: cover; border: 3px solid white;">
    {% else %}
        <img src="{% static 'app/images/default-avatar.jpg' %}" alt="Avatar"
             style="width: 120px; height: 120px; object-fit: cover; border: 3px solid white;">
    {% endif %}

    <div style="display: flex; flex-direction: column; justify-content: center;">
        <h2 style="
            font-size: 2.2rem;
            font-weight: bold;
            font-family: 'Arial', sans-serif;
            color: white;
            margin: 0;">
            {{ profile.user }}
        </h2>
        <h3 style="
            font-size: 1.5rem;
            font-weight: normal;
            font-family: 'Arial', sans-serif;
            color: #ccc;
            margin: 0;">
            {{ profile.name }}
        </h3>
<div class="profile-stats">
    <p>Posts: {{ posts_count }}</p>
    <p>Followers: {{ followers_count }}</p>
    <p>Following: {{ following_count }}</p>
</div>

{% if not owner %}
    <a href="{% url 'start_chat' profile.user.username %}" class="btn btn-primary" style="
       display: inline-block;
       margin-top: 10px;
       padding: 8px 16px;
       border-radius: 8px;
       background-color: #00bfff;
       color: white;
       text-decoration: none;
       font-weight: bold;
   " >
        Написати користувачу
    </a>
        {% if user in profile.followers.all %}
        <form action="{% url 'follow_toggle' profile.user.username %}" method="post">
            {% csrf_token %}
            <button type="submit" style="
       display: inline-block;
       margin-top: 10px;
       padding: 8px 16px;
       border-radius: 8px;
       background-color: #00bfff;
       color: white;
       text-decoration: none;
       font-weight: bold;
   ">Unfollow</button>
        </form>
    {% else %}
        <form action="{% url 'follow_toggle' profile.user.username %}" method="post">
            {% csrf_token %}
            <button type="submit" style="
       display: inline-block;
       margin-top: 10px;
       padding: 8px 16px;
       border-radius: 8px;
       background-color: #00bfff;
       color: white;
       text-decoration: none;
       font-weight: bold;
   ">Follow</button>
        </form>
    {% endif %}
{% endif %}

        {% if owner %}
        <a href="{% url 'edit_profile' %}"
   style="
       display: inline-block;
       margin-top: 10px;
       padding: 8px 16px;
       border-radius: 8px;
       background-color: #1abc9c;
       color: white;
       text-decoration: none;
       font-weight: bold;
   ">
   Edit Profile
</a>
          {% endif %}
    </div>
</div>

    {% if profile.bio %}
        <p class="bio">{{ profile.bio }}</p>
    {% endif %}

    <div class="posts">
        <!-- Тут можна додати пости користувача -->
    </div>
</div>
{% endblock %}
